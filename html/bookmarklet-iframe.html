<html>
<head>
<title>Playgrub</title>
<script src='js/playgrub.js' type='text/javascript'></script>
<script type='text/javascript'>
Playgrub.Events = {

    // Playgrub init
    init: function() {
        new Playgrub.Playlist();
        // new Playgrub.Scraper(); // TODO: extends PlaylistSource
        // new Playgrub.Client();
        // new Playgrub.Bookmarklet();
        new Playgrub.Content();

        new Playgrub.RemoteListener();  // TODO: extends PlaylistSource
    },

    // no scraper found for this domain
    noScraper: function() {
        // Playgrub.bookmarklet.set_status("This site is currently not supported by Playgrub");
    },

    // scraper found but there were no songs
    noSongs: function() {
        // Playgrub.bookmarklet.set_status(Playgrub.scraper.error);
    },

    // scraper done finding songs
    foundSongs: function() {
        Playgrub.Util.inject_css(Playgrub.PGHOST+'css/bookmarklet.css');
        $('#playgrub-bookmarklet-content').append(Playgrub.content.base_html());

        // Playgrub.playlist.url = window.location;
        // Playgrub.playlist.title = document.title;

        // write to playgrub server
        // Playgrub.client.write_playlist(Playgrub.playlist);

    },

    // Playgrub.client is done broadcasting playlist
    clientPlaylistPublished: function() {
        // Post to Twitter
        // Playgrub.Util.inject_script(Playgrub.PGHOST+'twitter_post?playlist='+Playgrub.playlist.id);

        // Playgrub.bookmarklet.playlist_loaded();
    },

    // Playgrub.client is broadcasting a playlist track
    clientTrackPublished: function() {
        // Playgrub.bookmarklet.track_broadcast();
    }
};

Playgrub.Util.load_remote('jQuery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js', function() { Playgrub.Events.init(); });

</script>
</head>
<body>
<script>
    window.addEventListener("message", function(e){
        // document.getElementById("playgrub-iframe-content").innerHTML = e.data;
    }, false);
</script>
<div id='playgrub-bookmarklet-content'></div>
</body>
</html>
